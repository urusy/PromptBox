# 動作確認チェックリスト

直近で実装した機能の動作確認リスト（2024/12/12-15実装分）

---

## 1. Model/LoRA一覧・詳細ページ

### Models一覧ページ (`/models`)
- [ ] ヘッダーの「Models」リンクからアクセスできる
- [ ] モデル一覧が表示される（バージョン除去されたベース名でグループ化）
- [ ] 複数バージョンがある場合「X versions」バッジが表示される
- [ ] 表示名（`\`以降の部分、バージョンサフィックス除去）が正しく表示される
- [ ] 検索（モデル名）が機能する
- [ ] フィルター
  - [ ] タイプフィルター（Checkpoint/SD/SDXL等）が機能する
  - [ ] 最小画像数フィルターが機能する
  - [ ] 最小評価フィルターが機能する
- [ ] ソート（画像数、評価、名前）が機能する
- [ ] モデルカードをクリックで詳細ページに遷移する

### Model詳細ページ (`/models/:name`)
- [ ] 基本情報が表示される（ベースモデル名、タイプ、全バージョン合計画像数等）
- [ ] 統計情報（総画像数、評価済み数、平均評価、高評価数）
- [ ] ローカルバージョンセクション（複数バージョンがある場合）
  - [ ] 「All Versions」タブで全バージョン一覧が表示される
  - [ ] 各バージョンタブで個別の統計が表示される
  - [ ] バージョンごとの評価分布グラフが表示される
  - [ ] 「View X images with this version」リンクが機能する
- [ ] CivitAI情報セクション
  - [ ] ローディング中表示
  - [ ] 情報取得成功時：名前、Creator、タイプ、説明文
  - [ ] CivitAIバージョンタブ（複数バージョンをタブで切り替え）
  - [ ] 各バージョンの画像、ベースモデル、ファイルサイズ、公開日
  - [ ] 推奨設定（Clip Skip、Steps、CFG、Sampler、VAE）
  - [ ] ダウンロードリンク
  - [ ] CivitAIへのリンクボタン
  - [ ] あいまいマッチ時の警告表示（黄色バッジ）
  - [ ] 見つからない場合のメッセージ
- [ ] 評価分布グラフ（全バージョン合計）
- [ ] Top Samplers一覧
- [ ] Top LoRAs一覧（クリックでLoRA詳細へ）
- [ ] 「View X images」ボタンでギャラリーへ遷移

### LoRAs一覧ページ (`/loras`)
- [ ] ヘッダーの「LoRAs」リンクからアクセスできる
- [ ] LoRA一覧が表示される
- [ ] 表示名が正しく表示される
- [ ] 検索が機能する
- [ ] フィルター（最小画像数、最小評価）が機能する
- [ ] ソート（画像数、評価、名前）が機能する
- [ ] クリックで詳細ページに遷移する

### LoRA詳細ページ (`/loras/:name`)
- [ ] 基本情報が表示される
- [ ] 統計情報（総画像数、評価済み数、平均評価、高評価数）
- [ ] 平均Weight表示
- [ ] 評価分布グラフ
- [ ] CivitAI情報セクション
  - [ ] 名前、Creator、タイプ、説明文
  - [ ] CivitAIバージョンタブ（複数バージョンをタブで切り替え）
  - [ ] 各バージョンの画像、ベースモデル、ファイルサイズ、公開日
  - [ ] トリガーワード（オレンジバッジ）
  - [ ] 推奨設定（Weight、Clip Skip、Steps、CFG、Sampler）
  - [ ] ダウンロードリンク
  - [ ] CivitAIへのリンクボタン
- [ ] Top Models一覧
- [ ] Top Samplers一覧
- [ ] 「View X images」ボタン

---

## 2. iOS Safari対応

### モーダル/ダイアログのスクロール制御
- [ ] Slideshow表示中に背景がスクロールしない
- [ ] 画像詳細ページのモーダル表示中に背景がスクロールしない
- [ ] SmartFolders編集モーダルで背景がスクロールしない
- [ ] Showcases編集モーダルで背景がスクロールしない
- [ ] 検索フォームのドロップダウン表示中に背景がスクロールしない

### Escキー対応
- [ ] Slideshow表示中にEscキーで閉じる
- [ ] SmartFolders編集モーダルでEscキーで閉じる
- [ ] Showcases編集モーダルでEscキーで閉じる

### 確認ダイアログ
- [ ] 削除確認などでカスタム確認ダイアログが表示される（ネイティブconfirm()ではない）

---

## 3. タグフィルター

### 検索フォームのタグフィルター

- [ ] タグフィルターUIが表示される
- [ ] タグ入力欄をクリックでドロップダウンが開く
- [ ] タグ検索（入力でフィルタリング）が機能する
- [ ] タグをクリックで選択できる
- [ ] 選択したタグがバッジとして表示される
- [ ] バッジの×ボタンでタグを削除できる
- [ ] 複数タグ選択時、AND条件で検索される
- [ ] 「Clear」ボタンでタグもクリアされる

---

## 4. Quick Rate（Tinder風UI）

### 基本機能 (`/swipe`)
- [ ] ヘッダーの「Rate」リンク（黄色スパークル）からアクセスできる
- [ ] 未評価画像が表示される（デフォルトで`exact_rating: 0`）
- [ ] 画像が大きく表示される
- [ ] プログレスバーが表示される

### スワイプ操作（モバイル）
- [ ] 左スワイプでスキップ
- [ ] 右スワイプでお気に入り（★5）
- [ ] スワイプ中のビジュアルフィードバック（傾き、色）

### キーボード操作（デスクトップ）
- [ ] `1-5`: 該当の評価を設定
- [ ] `F`: お気に入り（★5）
- [ ] `S`: スキップ（次へ）
- [ ] `I`: 要改善（★1）
- [ ] `←` / `→`: スキップ / お気に入り
- [ ] `↑` / `↓`: 前へ / 次へ
- [ ] `Ctrl+Z`: 戻る（Undo）

### ボタン操作
- [ ] スキップボタン（左）
- [ ] 要改善ボタン（中央左）
- [ ] お気に入りボタン（中央右・ハート）
- [ ] 戻るボタン（右）
- [ ] 評価ボタン（1-5）

### その他
- [ ] 画像クリックで詳細ページへ遷移
- [ ] フィルター変更で検索条件を変更できる
- [ ] 全画像処理後のメッセージ表示

---

## 5. Orientation（縦横）フィルター

- [ ] 検索フォームにOrientationフィルターが表示される
- [ ] Portrait（縦長）フィルターが機能する
- [ ] Landscape（横長）フィルターが機能する
- [ ] Square（正方形）フィルターが機能する
- [ ] フィルタークリアで解除される

---

## 6. Showcaseドラッグ&ドロップ並び替え

- [ ] Showcase詳細ページで編集モードに入れる
- [ ] 画像をドラッグで並び替えできる
- [ ] モバイルでもタッチ操作で並び替えできる
- [ ] 並び順が保存される
- [ ] iOS でドラッグ中に拡大鏡が出ない

---

## 7. iPhoneヘッダー修正

- [ ] iPhoneでヘッダー左右が切れない
- [ ] Safe Area対応（ノッチ、ホームバー領域）

---

## 確認環境

### デスクトップ
- [ ] Chrome
- [ ] Firefox
- [ ] Safari

### モバイル
- [ ] iPhone Safari
- [ ] Android Chrome

---

## 備考

- CivitAI情報はネットワーク状況により取得に時間がかかる場合あり
- 初回アクセス時はキャッシュがないためレスポンスが遅い可能性
- NSFW画像もCivitAIから取得・表示される設定

---

## 関連ドキュメント

- **E2Eテスト設計書**: `docs/07_e2e_testing.md`
  - 全機能のテストシナリオ（15カテゴリ、約50シナリオ）
  - Playwright MCPセットアップ手順
  - テスト結果記録フォーマット
